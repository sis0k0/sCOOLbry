include ../panel

.container
  ul.nav.nav-tabs(style="margin-bottom: 25px")
    li.active
      a(href="#personal-information", data-toggle="tab", target="_self").active
        | Personal information
    li
      a(href="#favorites", data-toggle="tab", target="_self")
        | Favorites
    li
      a(href="#personal-libraries", data-toggle="tab", target="_self")
        | Libraries

  #myTabContent.tab-content
    .tab-pane.fade.active.in#personal-information
      .row.vcenter
        .col-md-6.col-xs-6
          img.img-responsive.img-thumbnail(ng-src='{{ user.avatar }}')
        .col-md-5.col-xs-5
          .row
            h4.text-bold
            {{ user.firstName }} {{ user.lastName }} ({{ user.username }}) 
            i.fa.fa-male.blue(ng-show='user.gender=="Male"', title='Male', style='font-size: 1.2em')
            i.fa.fa-female.pink(ng-show='user.gender=="Female"', title='Female', style='font-size: 1.2em')
            i.fa.fa-user(ng-show='user.gender=="Not specified"', title='Not Specified', style='font-size: 1.2em')
          .row
            small Member since: {{ user.created | date:'dd MMMM yyyy&nbsp;HH:mm:ss'}}
          .row(ng-show='user.dateOfBirth!=="N/A"')
            small Birthday: {{ user.dateOfBirth | date:'dd MMMM yyyy'}}
          .row
            a(href='{{ user.facebookUrl }}', ng-show='user.facebookUrl!=="N/A"')
              i.fa.fa-facebook(style='font-size: 1.5em; color: #fff;')
            a(href='{{ user.twitterUrl }}', ng-show='user.twitterUrl!=="N/A"')
              i.fa.fa-twitter(style='font-size: 1.5em; color: #fff;')
            a(href='{{ user.googlePlusUrl }}', ng-show='user.googlePlusUrl!=="N/A"')
              i.fa.fa-google-plus(style='font-size: 1.5em; color: #fff;')
          .row
            small Email: {{ user.email }}&nbsp;
            a(href='mailto:{{ user.email }}', title='Send an email')
              i.fa.fa-envelope(style='color: #fff;')
          .row(ng-show='user.aboutMe!==""')
            small About: {{ user.aboutMe }}
          .row
            h4.text-bold Roles
            small(ng-repeat='(key, value) in user.roles') {{ value }}; 

      .row  
        .col-md-3.vcenter(style="margin-top: 10px;")
            a.btn.btn-primary.pull-left(href='/admin/user/edit/{{ user._id }}') Edit
            a.btn.btn-danger.pull-left.col-sm-offset-1(href='/admin/user/delete/{{ user._id }}' onclick='return window.confirm("Deleting an user" || "Are you sure that you want to delete this user?")') Delete   

      .row
        hr
        .col-md-6(ng-if='bookings.length>0', ng-class="{ 'col-xs-offset-3': readings.length<1 }")
          h2.text-center Bookings
          p
            accordion(close-others='true')
              accordion-group(ng-repeat='booking in bookings', is-open='booking.open')
                accordion-heading
                  span {{booking.title}}
                  timer.pull-right.text-success(end-time='booking.end')
                    | {{hours}} hours, {{minutes}} minutes, {{seconds}} seconds left
                img.img-responsive.img-thumbnail.col-xs-3(ng-src='{{ booking.cover }}', err-src='assets/images/missing-cover1.png', style='margin-right:2em')
                span.text-info Author: 
                span {{ booking.author }}
                span.pull-right {{ booking.publisher }}
                span.text-info.pull-right Publisher:&nbsp;
                span.col-xs-8(style='padding:0')
                  span.text-info Library: 
                  a(href='/libraries/{{booking.libraryID}}')
                    span {{ booking.libraryName }}
                a.col-xs-8(style='padding:10px 0', ng-href='/book/{{ booking._id }}/{{ booking.libraryID }}')
                  | See more

        .col-md-6(ng-if='readings.length>0', ng-class="{ 'col-xs-offset-3': bookings.length<1 }")
          h2.text-center Readings
          p
            accordion(close-others='true')
              accordion-group(ng-repeat='reading in readings', is-open='reading.open')
                accordion-heading
                  span {{reading.title}}
                  span.pull-right.text-success Till&nbsp; {{reading.end | date:'dd/MM/yyyy'}}
                img.img-responsive.img-thumbnail.col-xs-3(ng-src='{{ reading.cover }}', err-src='assets/images/missing-cover1.png', style='margin-right:2em')
                span.text-info Author: 
                span {{ reading.author }}
                span.pull-right {{ reading.publisher }}
                span.text-info.pull-right Publisher:&nbsp;
                span.col-xs-8(style='padding:0')
                  span.text-info Library: 
                  a(href='/libraries/{{reading.libraryID}}')
                    span {{ reading.libraryName }}
                a.col-xs-8(style='padding:10px 0', ng-href='/book/{{ reading._id }}/{{ reading.libraryID }}')
                  | See more


    .tab-pane.fade#favorites
      h3
        | Favorite Books
      ul(ng-hide='favoriteBooks.length==0')
        li(ng-repeat='book in favoriteBooks')
          a(href='/admin/book/{{ book.bookID }}') {{ book.bookName }}
      p(ng-hide='favoriteBooks.length!==0') No favorite books found.

    .tab-pane.fade#personal-libraries
      h3
        | Library Subscriptions
      ul(ng-hide='user.libraries.length==0')
        li(ng-repeat='library in user.libraries')
          a(href='/admin/library/{{ library._id }}') {{ library.name }}
      p(ng-hide='favoriteBooks.length!==0') No library subscriptions found.