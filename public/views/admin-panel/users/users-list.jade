include ../panel

.container
  h1.text-center Users list

  #users-list.table-responsive(ng-init="pages();")
    table.table.table-hover.table-bordered(ng-class="{ 'table-wrapped': windowWidth>768 }", resize)
      thead
        tr.text-bold.text-primary
          td#_id(ng-click="sort($event); reloadUsers()") ID
            span#_id.glyphicon.glyphicon-sort.text-right
          td#username(ng-click="sort($event); reloadUsers()") Username
            span#username.glyphicon.glyphicon-sort.text-right
          td#firstName(ng-click="sort($event); reloadUsers()") First name
            span#firstName.glyphicon.glyphicon-sort.text-right
          td#lastName(ng-click="sort($event); reloadUsers()") Last name
            span#lastName.glyphicon.glyphicon-sort.text-right
          td#created(ng-click="sort($event); reloadUsers()") Created
            span#created.glyphicon.glyphicon-sort.text-right
          td#email(ng-click="sort($event); reloadUsers()") Email
            span#email.glyphicon.glyphicon-sort.text-right
          td#roles(ng-click="sort($event); reloadUsers()") Roles
            span#roles.glyphicon.glyphicon-sort.text-right
          td Actions
      tr(ng-repeat="user in users")
        td.text-bold {{ user._id }}
        td {{ user.username }}
        td {{ user.firstName }}
        td {{ user.lastName }}
        td {{ user.created }}
        td {{ user.email }}
        td 
          p(ng-repeat='role in user.roles track by $index') {{ role | titleCase }}
        td
          a.btn-sm(href='/admin/user/{{ user._id }}', tooltip='Browse')
            span.glyphicon.glyphicon-search.text-success
          a.btn-sm(href='/admin/user/edit/{{ user._id }}', tooltip='Edit')
            span.glyphicon.glyphicon-edit.text-primary
          a.btn-sm(href='/admin/user/delete/{{ user._id }}', tooltip='Delete', onclick='return window.confirm("Deleting an user" || "Are you sure that you want to delete this user?")')
            span.glyphicon.glyphicon-remove.text-danger
  .pagination
      li(ng-repeat="i in range(pagesCount) track by $index")
        a(class="pageItem" href="#" ng-click="setPage($index+1, $event); reloadUsers();" id="page-{{ $index+1 }}") {{ $index+1 }}

