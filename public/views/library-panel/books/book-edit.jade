include ../panel

.container
  h1.text-center Update book
  form.form-horizontal(name='bookForm', novalidate)
    fieldset
      input.form-control(type='hidden', ng-model='libraryBook._id')
        span.text-info '{{ libraryBook.bookName }}'
      .row
        .col-md-11.col-md-offset-1
          .col-md-5
            label.control-label(for='total') Quantity at the library
            input.form-control(name='total', ng-model='libraryBook.total', type='number', min='{{libraryBook.given}}', on-focus) 

      .row(style='margin-top: 3em')
        .col-md-10.col-md-offset-1
          .col-xs-2
            img.img-responsive.img-thumbnail(ng-src='{{book.cover}}', style='margin-top:21px')
          .col-xs-10
            h2 {{book.title}}
            div
              span.text-muted(ng-repeat='genre in book.genres | limitTo:2')
                span {{genre | titleCase}}
                span(ng-show='!$last') , 
                span(ng-show='$last') &nbsp; / 
              span.text-info {{book.publisher}}
              span.text-info.pull-right {{ book.author }}
            div(ng-show='!showMore')
              p {{ book.description | limitTo: 200}}...
              a(href='#' ng-click='showMore=!showMore') Show more
            div(ng-show='!!showMore')
              p {{ book.description}}
              a(href='#' ng-click='showMore=!showMore') Show less


      .col-md-10.col-md-offset-1(ng-show='otherCharacteristics.length>0')
        .panel.panel-primary(style='margin-top:2em', ng-show='!!showMore')
          .panel-heading
            h4.text-center Additional information
          .panel-body
            div.col-xs-5(ng-repeat='(key,value) in otherCharacteristics')
              li
                span.text-success.text-bold {{ key }} 
                span : {{ value }}
      .row
        .pull-right
          button.btn.btn-primary(ng-click='updateLibBookAsLibrarian(libraryBook)', ng-disabled='bookForm.$invalid') Update
          a.btn.btn-danger(href='/library-panel/books-library', style='margin-left:0.2em') Cancel