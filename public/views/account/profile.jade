.container
  ul.nav.nav-tabs(style="margin-bottom: 25px")
    li.active
      a(href="#personal-information", data-toggle="tab", target="_self").active
        | Personal information
    li
      a(href="#favorites", data-toggle="tab", target="_self")
        | Favorites
    li
      a(href="#personal-libraries", data-toggle="tab", target="_self")
        | Libraries
    li
      a(href="#personal-readings", data-toggle="tab", target="_self")
        | Readings
    li
      a(href="#personal-bookings", data-toggle="tab", target="_self")
        | Bookings
    li
      a(href="#personal-fines", data-toggle="tab", target="_self")
        | Fines

  #myTabContent.tab-content
    .tab-pane.fade.active.in#personal-information
      .row.vcenter
        .col-md-5.col-xs-5
          img.img-responsive.img-thumbnail(ng-src='{{ user.avatar }}')
        .col-md-7.col-xs-7
          .row
            h3.text-info.text-bold
              {{ user.firstName }} {{ user.lastName }} ({{ user.username }}) 
            i.fa.fa-male.blue(ng-show='user.gender=="Male"', title='Male', style='font-size: 1.2em')
            i.fa.fa-female.pink(ng-show='user.gender=="Female"', title='Female', style='font-size: 1.2em')
            i.fa.fa-user(ng-show='user.gender=="Not specified"', title='Not Specified', style='font-size: 1.2em')
          .row
            span Member since: {{ user.created | date:'dd MMMM yyyy HH:mm:ss'}}
          .row(ng-show='user.dateOfBirth!=="N/A"')
            span Birthday: {{ user.dateOfBirth | date:'dd MMMM yyyy'}}
          .row
            a(href='{{ user.facebookUrl }}', ng-show='user.facebookUrl!=="N/A"')
              i.fa.fa-facebook(style='font-size: 1.5em; color: #fff;')
            a(href='{{ user.twitterUrl }}', ng-show='user.twitterUrl!=="N/A"')
              i.fa.fa-twitter(style='font-size: 1.5em; color: #fff;')
            a(href='{{ user.googlePlusUrl }}', ng-show='user.googlePlusUrl!=="N/A"')
              i.fa.fa-google-plus(style='font-size: 1.5em; color: #fff;')
          .row
            span Email: {{ user.email }}&nbsp;
            a(href='mailto:{{ user.email }}', title='Send an email')
              i.fa.fa-envelope(style='color: #fff;')
          .row(ng-show='user.aboutMe!==""')
            span About: {{ user.aboutMe }}
          .row
            h4.text-bold Roles
            span(ng-repeat='(key, value) in user.roles')
              span {{ value | titleCase }}
              span(ng-if='!$last') , 
          .row
            h4
              a(href='/profile/edit') Edit profile

      .row
        hr
        .col-md-3.col-md-offset-2.col-sm-3.vcenter.col-xs-offset-2.col-sm-offset-0(style='margin-right:5em;')
          div(barcode-generator='{{user}}')
        .col-md-5.col-md-offset-0.col-sm-5.col-sm-offset-1.hidden-xs.vcenter
          ul
            li That's your personal sCOOLbry ID card.
            li If your library supports our 'sCOOLbry Welcome' system, you can identify yourself with it.
            li At the entrance of the library, use the barcode scanner to scan your card.
            li You can download it (simply click on it) and print it, but you can also use it from your phone or tablet.

    .tab-pane.fade#favorites
      h3
        | Favorite Books
      ul(ng-hide='favoriteBooks.length==0')
        li(ng-repeat='book in favoriteBooks')
          a(href='/book/{{ book.bookID }}/{{ book.libraryID }}') {{ book.bookName }}
      p(ng-hide='favoriteBooks.length!==0') No favorite books found.

    .tab-pane.fade#personal-libraries
      h3
        | Library Subscriptions
      ul(ng-hide='user.libraries.length==0')
        li(ng-repeat='library in user.libraries')
          a(href='/admin/library/{{ library._id }}') {{ library.name }}
      p(ng-hide='user.libraries.length!==0') No library subscriptions found.
    .tab-pane.fade#personal-readings
      h3
        | Readings

        accordion(close-others='true')
          .row
            .col-md-6(ng-repeat='readingItem in user.readings', style='margin-top: 10px;')   
              accordion-group(is-open='readingItem.open', style='padding: 0px;')
                accordion-heading
                  span {{readingItem.book.title}}
                  span.pull-right.text-success Till&nbsp; {{readingItem.reading.endDate | date:'dd/MM/yyyy'}}
                .row

                  img.img-responsive.img-thumbnail.col-xs-3.pull-left.text-center(ng-src='{{ readingItem.book.cover }}', err-src='assets/images/missing-cover1.png', style='margin: 0 0.5em;')
                  .col-xs-7
                    .row
                      .col-md-6(style='padding:0px;')
                        span.text-info.pull-left Author: 
                      .col-md-6(style='padding:0px;')
                        span.pull-left {{ readingItem.book.author }}
                    .row
                      .col-md-6(style='padding:0px;')
                        span.text-info.pull-left Publisher:&nbsp;
                      .col-md-6(style='padding:0px;')
                        span.pull-left {{ readingItem.book.publisher }}
                
                    .row
                      .col-md-6(style='padding: 0px;')
                        span.text-info Library: 
                      .col-md-6(style='padding: 0px;')
                        a(href='/libraries/{{readingItem.reading.libraryID}}')
                          span {{ readingItem.reading.libraryName }}
                    .row
                      .col-md-12(style='padding: 0px;')
                        a.col-xs-8(style='padding:10px 0', ng-href='/book/{{ readingItem.reading.bookID }}/{{ readingItem.reading.libraryID }}')
                          | See more
      p(ng-hide='user.readings.length!==0') No read books found.
    .tab-pane.fade#personal-bookings
      h3
        | Bookings

        accordion(close-others='true')
          .row
            .col-md-6(ng-repeat='bookingItem in user.bookings', style='margin-top: 10px;')   
              accordion-group(is-open='bookingItem.open', style='padding: 0px;')
                accordion-heading
                  span {{bookingItem.booking.bookName}}
                  timer.pull-right.text-success(end-time='bookingItem.booking.bookDate')
                    | {{days}} days, {{hours}} hours, {{minutes}} minutes, {{seconds}} seconds left
                .row

                  img.img-responsive.img-thumbnail.col-xs-3.pull-left.text-center(ng-src='{{ bookingItem.book.cover }}', err-src='assets/images/missing-cover1.png', style='margin: 0 0.5em;')
                  .col-xs-7
                    .row
                      .col-md-6(style='padding:0px;')
                        span.text-info.pull-left Author: 
                      .col-md-6(style='padding:0px;')
                        span.pull-left {{ bookingItem.book.author }}
                    .row
                      .col-md-6(style='padding:0px;')
                        span.text-info.pull-left Publisher:&nbsp;
                      .col-md-6(style='padding:0px;')
                        span.pull-left {{ bookingItem.book.publisher }}
                
                    .row
                      .col-md-6(style='padding: 0px;')
                        span.text-info Library: 
                      .col-md-6(style='padding: 0px;')
                        a(href='/libraries/{{bookingItem.booking.libraryID}}')
                          span {{ bookingItem.booking.libraryName }}
                    .row
                      .col-md-12(style='padding: 0px;')
                        a.col-xs-8(style='padding:10px 0', ng-href='/book/{{ bookingItem.booking.bookID }}/{{ bookingItem.booking.libraryID }}')
                          | See more
      p(ng-hide='user.bookings.length!==0') No bookings found.
    .tab-pane.fade#personal-fines
      h3
        | Fines
      .row
        #fines-list.col-md-12.table-responsive(ng-hide='fines.length===0')
          table.table.table-hover.table-bordered(ng-class="{ 'table-wrapped': windowWidth>768 }", resize)
            thead
              tr.text-bold.text-primary
                td#amount Amount
                  span#amount.text-right
                td#reason Reason
                  span#reason.text-right
                td#added Date Added
                  span#added.text-right
                td#paid Date Paid
                  span#paid.text-right
                td Actions
              tr(ng-repeat="fine in fines")
                td {{ fine.amount }}
                td {{ fine.reason }}
                td {{ fine.added }}
                td {{ fine.paid }}
                td
                  a.btn-sm(ng-hide='fine.paid', href='/api/payment/create/paypal/{{fine.amount}}/USD/fine/{{fine._id}}', tooltip='Pay Fine', target='_blank')
                    span.glyphicon.glyphicon-credit-card.text-success
      p(ng-show='fines.length===0') You don't have any fines.
